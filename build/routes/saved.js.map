{"version":3,"sources":["../../server/routes/saved.js"],"names":["express","require","router","Router","use","get","req","res","find","exec","err","doc","console","log","send","post","result","title","body","headline","main","date","pub_date","url","web_url","entry","save","savedArt","delete","findByIdAndRemove","articleID","offer","module","exports"],"mappings":";;AAGA;;;;AAKA;;;;;;AARA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;;AAGA;AACAD,OAAOE,GAAP,CAAW,8BAAe,SAAf,CAAX;;AAEA;;;AAGA;AACA;AACAF,OAAOG,GAAP,CAAW,MAAX,EAAmB,UAACC,GAAD,EAAKC,GAAL,EAAa;AAC9B,oBAAQC,IAAR,CAAa,EAAb,EAAiBC,IAAjB,CAAsB,UAACC,GAAD,EAAMC,GAAN,EAAY;AAChC,QAAID,GAAJ,EAAS;AACPE,cAAQC,GAAR,CAAYH,GAAZ;AACD,KAFD,MAEO;AACLH,UAAIO,IAAJ,CAASH,GAAT;AACD;AACF,GAND;AAOD,CARD;AASA;AACAT,OAAOa,IAAP,CAAY,MAAZ,EAAoB,UAAUT,GAAV,EAAeC,GAAf,EAAoB;;AAEtCK,UAAQC,GAAR,CAAY,YAAZ;;AAEA,MAAIG,SAAS,EAAb;AACAA,SAAOC,KAAP,GAAeX,IAAIY,IAAJ,CAASC,QAAT,CAAkBC,IAAjC;AACAJ,SAAOK,IAAP,GAAcf,IAAIY,IAAJ,CAASI,QAAvB;AACAN,SAAOO,GAAP,GAAajB,IAAIY,IAAJ,CAASM,OAAtB;;AAEA,MAAIC,QAAQ,sBAAYT,MAAZ,CAAZ;;AAEAS,QAAMC,IAAN,CAAW,UAAChB,GAAD,EAAMiB,QAAN,EAAmB;AAC5B,QAAIjB,GAAJ,EAAS;AACPE,cAAQC,GAAR,CAAYH,GAAZ;AACD,KAFD,MAEO;AACLE,cAAQC,GAAR,CAAY;AACZ;AADA;AAED;AACF,GAPD;AAQD,CAnBD;;AAqBA;AACAX,OAAO0B,MAAP,CAAc,MAAd,EAAsB,UAAUtB,GAAV,EAAeC,GAAf,EAAoB;AACxCK,UAAQC,GAAR,CAAY,qBAAZ;AACA,oBAAQgB,iBAAR,CAA0BvB,IAAIY,IAAJ,CAASY,SAAnC,EAA8C,UAACpB,GAAD,EAAMqB,KAAN,EAAgB;AAC5D,QAAIrB,GAAJ,EAAS;AACPE,cAAQC,GAAR,CAAYH,GAAZ;AACD,KAFD,MAEO;AACLE,cAAQC,GAAR,CAAY;AACZ;AADA;AAED;AACF,GAPD;AAQD,CAVD;;AAYAmB,OAAOC,OAAP,GAAiB/B,MAAjB","file":"saved.js","sourcesContent":["var express = require(\"express\");\nvar router = express.Router();\n\nimport methodOverride from 'method-override';\n// override with POST having ?_method=DELETE\nrouter.use(methodOverride(\"_method\"));\n\n// Require Article schema\nimport Article from '../models/article';\n\n// This is the route we will send GET requests to retrieve our most recent saved articles\n// We will call this route the moment our page gets rendered\nrouter.get('/api', (req,res) => {\n  Article.find({}).exec((err, doc)=>{\n    if (err) {\n      console.log(err);\n    } else {\n      res.send(doc);\n    }\n  });\n});\n// save to MongoDB\nrouter.post(\"/api\", function (req, res) {\n\n  console.log(\"post route\");\n\n  var result = {};\n  result.title = req.body.headline.main;\n  result.date = req.body.pub_date;\n  result.url = req.body.web_url;\n\n  var entry = new Article(result);\n\n  entry.save((err, savedArt) => {\n    if (err) {\n      console.log(err)\n    } else {\n      console.log(\"saved article posted\")\n      //res.redirect(\"/\");\n    }\n  })\n});\n\n// delete database\nrouter.delete(\"/api\", function (req, res) {\n  console.log(\"delete route yes!!!\");\n  Article.findByIdAndRemove(req.body.articleID, (err, offer) => {\n    if (err) {\n      console.log(err)\n    } else {\n      console.log(\"deleted article\")\n      //res.redirect(\"/\");\n    }\n  });\n});\n\nmodule.exports = router;"]}