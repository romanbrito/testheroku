{"version":3,"sources":["../../../server/src/components/Main.js"],"names":["Main","state","saved","searchTerm","results","deleteArticleID","getArtTerm","Term","console","log","runQuery","then","data","setState","deleteArticle","articleID","getSaved","response","saveArticle","prevProps","prevState","map","item","_id","join"],"mappings":"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","file":"Main.js","sourcesContent":["import React, {Component} from 'react';\nimport {Route} from 'react-router-dom';\n\nimport {Jumbotron} from 'react-bootstrap';\n\n// could move to routes\nimport Form from './Form';\nimport Saved from './Saved';\nimport Results from './Results';\n\nimport helpers from '../utils/helpers';\n\n\nclass Main extends Component {\n\n  state = {\n    saved: [],\n    searchTerm:{},\n    results: [],\n    deleteArticleID:''\n  };\n\n  // The moment the page renders get the saved articles\n  componentDidMount() {\n    // Get saved articles.\n    helpers.getSaved().then((response) => {\n      //console.log(response);\n      if (response !== this.state.saved) {\n        //console.log('saved', response.data);\n        this.setState({saved: response.data});\n      }\n    }); //.bind(this)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // this avoids continuous calling to api\n\n    if (prevState.saved.map((item) => item._id).join() !== this.state.saved.map((item) => item._id).join()) {\n      console.log(prevState.saved.map((item) => item._id).join() + \" ---- \" + this.state.saved.map((item) => item._id).join());\n      // Get saved articles.\n      helpers.getSaved().then((response) => {\n        console.log(response);\n        if (response !== this.state.saved) {\n          this.setState({saved: response.data});\n          console.log('saved', this.state.saved);\n        }\n      }); //.bind(this)\n    }\n\n  }\n\n  // This function allows childrens to update the parent saved\n    // search articles in nyt articles\n   getArtTerm= (Term) => {\n    console.log(Term);\n     // Run query for the article\n     helpers.runQuery(Term).then((data) => {\n       if (data !== this.state.results) {\n         this.setState({results: data});\n         console.log('Articles');\n         console.log(this.state.results);\n       }\n     })\n  };\n\n  // This function allows childrens to update the parent saved\n  // search term\n  deleteArticle = (articleID) => {\n\n    console.log(articleID);\n    helpers.deleteArticle(articleID);\n\n    helpers.getSaved().then((response) => {\n      if (response !== this.state.saved) {\n        this.setState({\n          saved: response.data\n        });\n        console.log(\"saved after delete \" + this.state.saved)\n      }\n    })\n\n  };\n\n  saveArticle = (articleID) => {\n\n    console.log(articleID);\n\n    helpers.getSaved().then((response) => {\n      if (response !== this.state.saved) {\n        this.setState({\n          saved: response.data\n        });\n        console.log(\"saved after saved \" + this.state.saved)\n      }\n    })\n  };\n\n\n  render() {\n  return (\n    <div className=\"container\">\n\n      <Jumbotron>\n        <h1>New York Times Article Scrubber</h1>\n        <p>Search for and annotate articles of interest!</p>\n      </Jumbotron>\n\n\n      {/*Form component*/}\n      <Form getArtTerm={this.getArtTerm}/>\n\n      {/*Results component*/}\n\n        <Results\n          results={this.state.results} savefunc={this.saveArticle}\n        />\n\n\n      {/*Show saved articles*/}\n      <Saved savedArticles={this.state.saved} deletefunc={this.deleteArticle}/>\n\n    </div>\n\n  );\n  }\n};\n\nexport default Main;"]}